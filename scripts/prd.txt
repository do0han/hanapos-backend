# Overview
hanaPOS Cloud Base는 필리핀 소규모 카페/식당을 위한 클라우드 기반 POS 및 통합 주문 관리 앱입니다. 수기 장부, 비싼 POS, 모바일 결제 연동의 어려움 등 현지 문제를 해결하며, GCash/PayMaya 등 현지 결제와 저렴한 구독료, 직관적 UI/UX, 통합 주문 기능을 제공합니다.

# Core Features
- **현지화 결제:** GCash/PayMaya QR 결제 완전 지원
- **클라우드 POS:** Supabase 기반, 실시간 동기화/오프라인 모드
- **직관적 UI/UX:** 비전문가도 쉽게 사용 가능
- **상품/재고 관리:** 상품 등록, 재고 자동/수동 관리, 재고 이력
- **판매 처리:** 현금/QR 결제, 장바구니, 주문 기록, 거스름돈 계산
- **기본 보고서:** 일별 매출, 인기 상품 등 간단 리포트
- **역할 기반 인증:** Supabase Auth, RLS, RBAC

# User Experience
- **주요 사용자:** 필리핀 소규모 매장주/직원
- **주요 플로우:** 로그인 → 상품/재고 관리 → POS 판매/결제 → 매출/재고 확인
- **UI/UX:** 태블릿 최적화, 최소 터치, 명확한 피드백, 재고 부족/오류 시 시각적 강조

# Technical Architecture
- **프론트엔드:** Flutter (모바일/태블릿)
- **백엔드:** Next.js API Routes + Supabase (PostgreSQL, Auth, Realtime, Edge Functions)
- **DB 주요 테이블:** users, products, orders, order_items, stores, stock_adjustments
- **인증/보안:** Supabase Auth, RLS, RBAC, DPA/PCI DSS 준수
- **결제 연동:** GCash/PayMaya API (초기엔 더미)
- **인프라:** Supabase Cloud, Vercel

# Development Roadmap
- **MVP:**
  - Supabase/Next.js/Flutter 프로젝트 초기화
  - DB 스키마/테이블/인증/RLS 설정
  - Flutter: 로그인, 상품 관리, POS, 결제, 보고서 UI/로직
  - Next.js: 결제 API(더미), 보고서 API
  - 자동/수동 재고 관리, 일별 매출 리포트
- **향후:**
  - 고급 재고/보고서, 고객/직원 관리, 온라인 주문, 하드웨어 연동 등

# Logical Dependency Chain
1. Supabase/Next.js/Flutter 프로젝트 및 DB/RLS 설정
2. 인증/권한 → 상품/재고 관리 → POS/결제 → 보고서
3. MVP 기능부터 점진적 확장 (기본이 되는 기능부터, UI/UX는 항상 단순 명확하게)

# Risks and Mitigations
- **현지 결제 연동:** API 변경/불안정 → 더미로 시작, 실제 연동은 단계적 적용
- **오프라인 동기화:** 네트워크 불안정 → Supabase Realtime/로컬 캐시 활용
- **법/규정:** BIR 등 현지 규정 준수 필요 → 전문가 자문, 민감 정보 직접 저장 금지
- **사용성:** 비전문가 대상 → 반복적 피드백, UI/UX 단순화

# Appendix
- **기술 스택:** Flutter, Next.js, Supabase(PostgreSQL, Auth, Edge Functions)
- **참고:** PRDv2.md 전체, Supabase/GCash/PayMaya 공식 문서
- **확장성:** 다중 매장, 온라인 주문, 로열티, 회계 연동 등 단계적 확장 고려 